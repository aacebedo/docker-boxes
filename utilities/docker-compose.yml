version: '2'
services:
  traefik:
    image: traefik:latest
    labels:
      - traefik.enable=false
    networks:
      - utilities_network
    environment:
      - TRAEFIK_DOMAIN=${TRAEFIK_DOMAIN}
      - TRAEFIK_SUBDOMAINS=${TRAEFIK_SUBDOMAINS}
      - TRAEFIK_ADMIN_EMAIL=${TRAEFIK_ADMIN_EMAIL}
      - TRAEFIK_ADMIN_AUTH=${TRAEFIK_ADMIN_AUTH}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - ${TRAEFIK_PORT}:80
      - ${TRAEFIK_SECUREPORT}:443
      - ${TRAEFIK_CONTROLPORT}:82
    hostname: traefik
    restart: always

  cfdnsupdater:
    image: cfdnsupdater:latest
    environment:
      - CFDNSUPDATER_DOMAIN=${CFDNSUPDATER_DOMAIN}
      - CFDNSUPDATER_EMAIL=${CFDNSUPDATER_EMAIL}
      - CFDNSUPDATER_APIKEY=${CFDNSUPDATER_APIKEY}
      - CFDNSUPDATER_PERIOD=${CFDNSUPDATER_PERIOD}
      - CFDNSUPDATER_RECORDTYPES=${CFDNSUPDATER_RECORDTYPES}
      - CFDNSUPDATER_RECORDNAMES=${CFDNSUPDATER_RECORDNAMES}
    restart: always
    hostname: cfdnsudpater
    labels:
      - traefik.enable=false
   
  dnsdock:
    image: dnsdock:latest
    environment:
      - DNSDOCK_DOMAIN=${DNSDOCK_DOMAIN}
    restart: always
    hostname: dnsdock
    labels:
      - traefik.enable=false
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - ${DNSDOCK_PORT}:53
      - ${DNSDOCK_CONTROLPORT}:80

networks:
  utilities_network:
    external:
      name: ${UTILITIES_NETWORK}
